<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  rabbitMq - lengthuo
  
  </title>
 <meta name="description" content="路漫漫其修远兮吾将上下而求索">
 <link href="atom.xml" rel="alternate" title="lengthuo" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">lengthuo</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; lengthuo</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>php</label></li>

          
            <li><a title="php7新特性" href="15173733442452.html">php7新特性</a></li>
          
            <li><a title="supervisor运行laravel的队列" href="15173644197300.html">supervisor运行laravel的队列</a></li>
          
            <li><a title="php数组" href="15161783412583.html">php数组</a></li>
          
            <li><a title="输出区别" href="15160839984550.html">输出区别</a></li>
          
            <li><a title="常用内置函数" href="15160723189188.html">常用内置函数</a></li>
          
            <li><a title="强制类型转换" href="15159830999579.html">强制类型转换</a></li>
          
            <li><a title="数组的常用操作" href="15159199909308.html">数组的常用操作</a></li>
          
            <li><a title="SPL--SplObjectStorage 方法使用" href="15157440556671.html">SPL--SplObjectStorage 方法使用</a></li>
          
            <li><a title="php 与 nginx" href="15128085452995.html">php 与 nginx</a></li>
          
            <li><a title="练习题" href="15100534066184.html">练习题</a></li>
          
            <li><a title="基础" href="15100478594807.html">基础</a></li>
          
            <li><a title="开发规范" href="15096850612612.html">开发规范</a></li>
          

      
        <li class="divider"></li>
        <li><label>mysql</label></li>

          
            <li><a title="实战：主键设计" href="15179987835900.html">实战：主键设计</a></li>
          
            <li><a title="日志" href="15178945902959.html">日志</a></li>
          
            <li><a title="mysql存储引擎" href="15178078164903.html">mysql存储引擎</a></li>
          
            <li><a title="重点：mysql数据库开发规范" href="15177931519671.html">重点：mysql数据库开发规范</a></li>
          
            <li><a title="索引-最左原则正确理解" href="15175642572916.html">索引-最左原则正确理解</a></li>
          
            <li><a title="范式" href="15175627851093.html">范式</a></li>
          
            <li><a title="explain执行计划" href="15173182651872.html">explain执行计划</a></li>
          
            <li><a title="B树" href="15172820975706.html">B树</a></li>
          
            <li><a title="索引" href="15172740053891.html">索引</a></li>
          
            <li><a title="重点：开发常用数据库优化方案" href="15172217880874.html">重点：开发常用数据库优化方案</a></li>
          
            <li><a title="手册（笔记）" href="15168781243544.html">手册（笔记）</a></li>
          
            <li><a title="实战：分库分表" href="15167034037540.html">实战：分库分表</a></li>
          
            <li><a title="事务隔离级别" href="15141075416071.html">事务隔离级别</a></li>
          
            <li><a title="undo redo" href="15122837144953.html">undo redo</a></li>
          
            <li><a title="体系结构" href="15122798667483.html">体系结构</a></li>
          

      
        <li class="divider"></li>
        <li><label>设计模式</label></li>

          
            <li><a title="建造者模式 Builder" href="15161735119526.html">建造者模式 Builder</a></li>
          
            <li><a title="模板模式 Template" href="15160863540227.html">模板模式 Template</a></li>
          
            <li><a title="责任链模式 Chain Of Responsibilities" href="15159784361914.html">责任链模式 Chain Of Responsibilities</a></li>
          
            <li><a title="代理模式 Proxy" href="15159191969840.html">代理模式 Proxy</a></li>
          
            <li><a title="迭代器模式 Iterator" href="15159115676241.html">迭代器模式 Iterator</a></li>
          
            <li><a title="装饰者模式 Decorator" href="15157475295856.html">装饰者模式 Decorator</a></li>
          
            <li><a title="观察者模式（发布/订阅）" href="15156567245483.html">观察者模式（发布/订阅）</a></li>
          
            <li><a title="策略者模式 Strategy" href="15156462726597.html">策略者模式 Strategy</a></li>
          
            <li><a title="适配器模式 Adapter" href="15155943331662.html">适配器模式 Adapter</a></li>
          
            <li><a title="注册模式" href="15155930643208.html">注册模式</a></li>
          
            <li><a title="多例模式" href="15155928275964.html">多例模式</a></li>
          
            <li><a title="单例模式 Singleton" href="15155806503913.html">单例模式 Singleton</a></li>
          
            <li><a title="工厂模式 Factory" href="15155788496928.html">工厂模式 Factory</a></li>
          

      
        <li class="divider"></li>
        <li><label>数据结构</label></li>

          
            <li><a title="常用数据结构" href="15179116222861.html">常用数据结构</a></li>
          
            <li><a title="哈夫曼树" href="15105529119460.html">哈夫曼树</a></li>
          
            <li><a title="hashMap" href="15098725685121.html">hashMap</a></li>
          
            <li><a title="树" href="15098688823158.html">树</a></li>
          

      
        <li class="divider"></li>
        <li><label>算法</label></li>

          
            <li><a title="文档--排序-说明" href="15098667005910.html">文档--排序-说明</a></li>
          
            <li><a title="文档--排序-归并排序" href="15098651418800.html">文档--排序-归并排序</a></li>
          
            <li><a title="文档--排序-插入排序-希尔排序（面试热点）" href="15097185400207.html">文档--排序-插入排序-希尔排序（面试热点）</a></li>
          
            <li><a title="文档--排序-选择排序" href="15097183591874.html">文档--排序-选择排序</a></li>
          
            <li><a title="文档--排序-插入排序-直接插入排序（面试热点）" href="15097183328300.html">文档--排序-插入排序-直接插入排序（面试热点）</a></li>
          
            <li><a title="文档--排序-快速排序（面试热点）" href="15097181541647.html">文档--排序-快速排序（面试热点）</a></li>
          
            <li><a title="文档--排序-冒泡(基础)" href="15097179853305.html">文档--排序-冒泡(基础)</a></li>
          

      
        <li class="divider"></li>
        <li><label>linux</label></li>

          
            <li><a title="vim" href="15173837986066.html">vim</a></li>
          
            <li><a title="系统平均负载3个数字的含义" href="15173668021737.html">系统平均负载3个数字的含义</a></li>
          
            <li><a title="Linux下php-fpm进程过多导致内存耗尽问题解决" href="15171886819414.html">Linux下php-fpm进程过多导致内存耗尽问题解决</a></li>
          
            <li><a title="常用命令" href="15157453713814.html">常用命令</a></li>
          
            <li><a title="nginx.conf" href="15121311525125.html">nginx.conf</a></li>
          
            <li><a title="资源使用情况-top" href="15118629061448.html">资源使用情况-top</a></li>
          
            <li><a title="资源使用情况-内存" href="15118570754250.html">资源使用情况-内存</a></li>
          
            <li><a title="资源使用情况-硬盘" href="15118542040577.html">资源使用情况-硬盘</a></li>
          
            <li><a title="系统定时任务-cron" href="15097607422303.html">系统定时任务-cron</a></li>
          
            <li><a title="服务重启" href="15097602933518.html">服务重启</a></li>
          
            <li><a title="系统定时任务-at" href="15097593737810.html">系统定时任务-at</a></li>
          
            <li><a title="文档--linux 查看服务器系统的信息" href="15097189513675.html">文档--linux 查看服务器系统的信息</a></li>
          
            <li><a title="笔记--常用命令" href="15097187372089.html">笔记--常用命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>nginx</label></li>

          
            <li><a title="" href="15178121495507.html"></a></li>
          

      
        <li class="divider"></li>
        <li><label>计算机网络</label></li>

          
            <li><a title="tcp长连接和短连接" href="15126148983598.html">tcp长连接和短连接</a></li>
          
            <li><a title="htpp  tcp  socket RPC 区别" href="15126133687903.html">htpp  tcp  socket RPC 区别</a></li>
          
            <li><a title="cpu信息" href="15121290135332.html">cpu信息</a></li>
          
            <li><a title="加密 - php" href="15120227213651.html">加密 - php</a></li>
          
            <li><a title="笔记" href="15119301111389.html">笔记</a></li>
          

      
        <li class="divider"></li>
        <li><label>git</label></li>

          
            <li><a title="规范-提交代码规范" href="15097964202481.html">规范-提交代码规范</a></li>
          
            <li><a title="文档-git命令大全(图)" href="15097175223406.html">文档-git命令大全(图)</a></li>
          
            <li><a title="笔记-git 常用命令" href="15097169426182.html">笔记-git 常用命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>docker</label></li>

          
            <li><a title="笔记--本地环境" href="15122247911731.html">笔记--本地环境</a></li>
          
            <li><a title="笔记--docker-lnmp" href="15109921864789.html">笔记--docker-lnmp</a></li>
          
            <li><a title="笔记--docker 常用命令" href="15109855218654.html">笔记--docker 常用命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>redis</label></li>

          
            <li><a title="持久化机制" href="15175598361772.html">持久化机制</a></li>
          
            <li><a title="配置" href="15120904003130.html">配置</a></li>
          
            <li><a title="使用小技巧" href="15119287261764.html">使用小技巧</a></li>
          
            <li><a title="支持类型" href="15099434695015.html">支持类型</a></li>
          

      
        <li class="divider"></li>
        <li><label>rabbitMq</label></li>

          
            <li><a title="rabbitMq使用（php）" href="15153208224566.html">rabbitMq使用（php）</a></li>
          
            <li><a title="RPC认识" href="15125232010346.html">RPC认识</a></li>
          

      
        <li class="divider"></li>
        <li><label>java</label></li>

          
            <li><a title="基础-StringBuffer StringBuilder" href="15162420570699.html">基础-StringBuffer StringBuilder</a></li>
          
            <li><a title="基础-常用命令" href="15162420178152.html">基础-常用命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>raml的使用</label></li>

          
            <li><a title="实战--raml命令" href="15151387241047.html">实战--raml命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>负载均衡</label></li>

          
            <li><a title="笔记--负载均衡相关技术" href="15119209173837.html">笔记--负载均衡相关技术</a></li>
          
            <li><a title="笔记--Kubernetes" href="15118321078018.html">笔记--Kubernetes</a></li>
          
            <li><a title="笔记--常用开源软件负载均衡器有：Nginx、LVS、Haproxy。" href="15118307471214.html">笔记--常用开源软件负载均衡器有：Nginx、LVS、Haproxy。</a></li>
          

      
        <li class="divider"></li>
        <li><label>other</label></li>

          
            <li><a title="2018" href="15192205651213.html">2018</a></li>
          
            <li><a title="金融云总结" href="15181672512390.html">金融云总结</a></li>
          
            <li><a title="计算机基础-单位划算" href="15180666486345.html">计算机基础-单位划算</a></li>
          
            <li><a title="计算机基础-寻址空间" href="15180666364633.html">计算机基础-寻址空间</a></li>
          
            <li><a title="进程线程" href="15175609277088.html">进程线程</a></li>
          
            <li><a title="linux" href="15173649652108.html">linux</a></li>
          
            <li><a title="硬盘的读写原理  内存的工作原理及时序介绍" href="15172817075574.html">硬盘的读写原理  内存的工作原理及时序介绍</a></li>
          
            <li><a title="经典问题与解决方案" href="15167863895932.html">经典问题与解决方案</a></li>
          
            <li><a title="专业术语" href="15167559156487.html">专业术语</a></li>
          

      
        <li class="divider"></li>
        <li><label>springboot-初探</label></li>

          
            <li><a title="实战--请求参数的校验" href="15153099746529.html">实战--请求参数的校验</a></li>
          
            <li><a title="实战--参数类的封装（用到的注解）" href="15153060497346.html">实战--参数类的封装（用到的注解）</a></li>
          
            <li><a title="实战--代码读取配置文件" href="15152498896435.html">实战--代码读取配置文件</a></li>
          
            <li><a title="实战--application.yml配置" href="15152489636520.html">实战--application.yml配置</a></li>
          
            <li><a title="实战--aop切面编程" href="15152275531791.html">实战--aop切面编程</a></li>
          
            <li><a title="实战--热部署（热加载）" href="15152265532298.html">实战--热部署（热加载）</a></li>
          
            <li><a title="实战--整合mybatis （分页）" href="15152264815650.html">实战--整合mybatis （分页）</a></li>
          
            <li><a title="实战--日志" href="15152256498572.html">实战--日志</a></li>
          
            <li><a title="实战--统一异常处理" href="15152246712798.html">实战--统一异常处理</a></li>
          
            <li><a title="实战--返回json" href="15152240940735.html">实战--返回json</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>php</span></li>
                        
                          <li><a title="php7新特性" href="15173733442452.html">php7新特性</a></li>
                        
                          <li><a title="supervisor运行laravel的队列" href="15173644197300.html">supervisor运行laravel的队列</a></li>
                        
                          <li><a title="php数组" href="15161783412583.html">php数组</a></li>
                        
                          <li><a title="输出区别" href="15160839984550.html">输出区别</a></li>
                        
                          <li><a title="常用内置函数" href="15160723189188.html">常用内置函数</a></li>
                        
                          <li><a title="强制类型转换" href="15159830999579.html">强制类型转换</a></li>
                        
                          <li><a title="数组的常用操作" href="15159199909308.html">数组的常用操作</a></li>
                        
                          <li><a title="SPL--SplObjectStorage 方法使用" href="15157440556671.html">SPL--SplObjectStorage 方法使用</a></li>
                        
                          <li><a title="php 与 nginx" href="15128085452995.html">php 与 nginx</a></li>
                        
                          <li><a title="练习题" href="15100534066184.html">练习题</a></li>
                        
                          <li><a title="基础" href="15100478594807.html">基础</a></li>
                        
                          <li><a title="开发规范" href="15096850612612.html">开发规范</a></li>
                        

                    
                      <li class="side-title"><span>mysql</span></li>
                        
                          <li><a title="实战：主键设计" href="15179987835900.html">实战：主键设计</a></li>
                        
                          <li><a title="日志" href="15178945902959.html">日志</a></li>
                        
                          <li><a title="mysql存储引擎" href="15178078164903.html">mysql存储引擎</a></li>
                        
                          <li><a title="重点：mysql数据库开发规范" href="15177931519671.html">重点：mysql数据库开发规范</a></li>
                        
                          <li><a title="索引-最左原则正确理解" href="15175642572916.html">索引-最左原则正确理解</a></li>
                        
                          <li><a title="范式" href="15175627851093.html">范式</a></li>
                        
                          <li><a title="explain执行计划" href="15173182651872.html">explain执行计划</a></li>
                        
                          <li><a title="B树" href="15172820975706.html">B树</a></li>
                        
                          <li><a title="索引" href="15172740053891.html">索引</a></li>
                        
                          <li><a title="重点：开发常用数据库优化方案" href="15172217880874.html">重点：开发常用数据库优化方案</a></li>
                        
                          <li><a title="手册（笔记）" href="15168781243544.html">手册（笔记）</a></li>
                        
                          <li><a title="实战：分库分表" href="15167034037540.html">实战：分库分表</a></li>
                        
                          <li><a title="事务隔离级别" href="15141075416071.html">事务隔离级别</a></li>
                        
                          <li><a title="undo redo" href="15122837144953.html">undo redo</a></li>
                        
                          <li><a title="体系结构" href="15122798667483.html">体系结构</a></li>
                        

                    
                      <li class="side-title"><span>设计模式</span></li>
                        
                          <li><a title="建造者模式 Builder" href="15161735119526.html">建造者模式 Builder</a></li>
                        
                          <li><a title="模板模式 Template" href="15160863540227.html">模板模式 Template</a></li>
                        
                          <li><a title="责任链模式 Chain Of Responsibilities" href="15159784361914.html">责任链模式 Chain Of Responsibilities</a></li>
                        
                          <li><a title="代理模式 Proxy" href="15159191969840.html">代理模式 Proxy</a></li>
                        
                          <li><a title="迭代器模式 Iterator" href="15159115676241.html">迭代器模式 Iterator</a></li>
                        
                          <li><a title="装饰者模式 Decorator" href="15157475295856.html">装饰者模式 Decorator</a></li>
                        
                          <li><a title="观察者模式（发布/订阅）" href="15156567245483.html">观察者模式（发布/订阅）</a></li>
                        
                          <li><a title="策略者模式 Strategy" href="15156462726597.html">策略者模式 Strategy</a></li>
                        
                          <li><a title="适配器模式 Adapter" href="15155943331662.html">适配器模式 Adapter</a></li>
                        
                          <li><a title="注册模式" href="15155930643208.html">注册模式</a></li>
                        
                          <li><a title="多例模式" href="15155928275964.html">多例模式</a></li>
                        
                          <li><a title="单例模式 Singleton" href="15155806503913.html">单例模式 Singleton</a></li>
                        
                          <li><a title="工厂模式 Factory" href="15155788496928.html">工厂模式 Factory</a></li>
                        

                    
                      <li class="side-title"><span>数据结构</span></li>
                        
                          <li><a title="常用数据结构" href="15179116222861.html">常用数据结构</a></li>
                        
                          <li><a title="哈夫曼树" href="15105529119460.html">哈夫曼树</a></li>
                        
                          <li><a title="hashMap" href="15098725685121.html">hashMap</a></li>
                        
                          <li><a title="树" href="15098688823158.html">树</a></li>
                        

                    
                      <li class="side-title"><span>算法</span></li>
                        
                          <li><a title="文档--排序-说明" href="15098667005910.html">文档--排序-说明</a></li>
                        
                          <li><a title="文档--排序-归并排序" href="15098651418800.html">文档--排序-归并排序</a></li>
                        
                          <li><a title="文档--排序-插入排序-希尔排序（面试热点）" href="15097185400207.html">文档--排序-插入排序-希尔排序（面试热点）</a></li>
                        
                          <li><a title="文档--排序-选择排序" href="15097183591874.html">文档--排序-选择排序</a></li>
                        
                          <li><a title="文档--排序-插入排序-直接插入排序（面试热点）" href="15097183328300.html">文档--排序-插入排序-直接插入排序（面试热点）</a></li>
                        
                          <li><a title="文档--排序-快速排序（面试热点）" href="15097181541647.html">文档--排序-快速排序（面试热点）</a></li>
                        
                          <li><a title="文档--排序-冒泡(基础)" href="15097179853305.html">文档--排序-冒泡(基础)</a></li>
                        

                    
                      <li class="side-title"><span>linux</span></li>
                        
                          <li><a title="vim" href="15173837986066.html">vim</a></li>
                        
                          <li><a title="系统平均负载3个数字的含义" href="15173668021737.html">系统平均负载3个数字的含义</a></li>
                        
                          <li><a title="Linux下php-fpm进程过多导致内存耗尽问题解决" href="15171886819414.html">Linux下php-fpm进程过多导致内存耗尽问题解决</a></li>
                        
                          <li><a title="常用命令" href="15157453713814.html">常用命令</a></li>
                        
                          <li><a title="nginx.conf" href="15121311525125.html">nginx.conf</a></li>
                        
                          <li><a title="资源使用情况-top" href="15118629061448.html">资源使用情况-top</a></li>
                        
                          <li><a title="资源使用情况-内存" href="15118570754250.html">资源使用情况-内存</a></li>
                        
                          <li><a title="资源使用情况-硬盘" href="15118542040577.html">资源使用情况-硬盘</a></li>
                        
                          <li><a title="系统定时任务-cron" href="15097607422303.html">系统定时任务-cron</a></li>
                        
                          <li><a title="服务重启" href="15097602933518.html">服务重启</a></li>
                        
                          <li><a title="系统定时任务-at" href="15097593737810.html">系统定时任务-at</a></li>
                        
                          <li><a title="文档--linux 查看服务器系统的信息" href="15097189513675.html">文档--linux 查看服务器系统的信息</a></li>
                        
                          <li><a title="笔记--常用命令" href="15097187372089.html">笔记--常用命令</a></li>
                        

                    
                      <li class="side-title"><span>nginx</span></li>
                        
                          <li><a title="" href="15178121495507.html"></a></li>
                        

                    
                      <li class="side-title"><span>计算机网络</span></li>
                        
                          <li><a title="tcp长连接和短连接" href="15126148983598.html">tcp长连接和短连接</a></li>
                        
                          <li><a title="htpp  tcp  socket RPC 区别" href="15126133687903.html">htpp  tcp  socket RPC 区别</a></li>
                        
                          <li><a title="cpu信息" href="15121290135332.html">cpu信息</a></li>
                        
                          <li><a title="加密 - php" href="15120227213651.html">加密 - php</a></li>
                        
                          <li><a title="笔记" href="15119301111389.html">笔记</a></li>
                        

                    
                      <li class="side-title"><span>git</span></li>
                        
                          <li><a title="规范-提交代码规范" href="15097964202481.html">规范-提交代码规范</a></li>
                        
                          <li><a title="文档-git命令大全(图)" href="15097175223406.html">文档-git命令大全(图)</a></li>
                        
                          <li><a title="笔记-git 常用命令" href="15097169426182.html">笔记-git 常用命令</a></li>
                        

                    
                      <li class="side-title"><span>docker</span></li>
                        
                          <li><a title="笔记--本地环境" href="15122247911731.html">笔记--本地环境</a></li>
                        
                          <li><a title="笔记--docker-lnmp" href="15109921864789.html">笔记--docker-lnmp</a></li>
                        
                          <li><a title="笔记--docker 常用命令" href="15109855218654.html">笔记--docker 常用命令</a></li>
                        

                    
                      <li class="side-title"><span>redis</span></li>
                        
                          <li><a title="持久化机制" href="15175598361772.html">持久化机制</a></li>
                        
                          <li><a title="配置" href="15120904003130.html">配置</a></li>
                        
                          <li><a title="使用小技巧" href="15119287261764.html">使用小技巧</a></li>
                        
                          <li><a title="支持类型" href="15099434695015.html">支持类型</a></li>
                        

                    
                      <li class="side-title"><span>rabbitMq</span></li>
                        
                          <li><a title="rabbitMq使用（php）" href="15153208224566.html">rabbitMq使用（php）</a></li>
                        
                          <li><a title="RPC认识" href="15125232010346.html">RPC认识</a></li>
                        

                    
                      <li class="side-title"><span>java</span></li>
                        
                          <li><a title="基础-StringBuffer StringBuilder" href="15162420570699.html">基础-StringBuffer StringBuilder</a></li>
                        
                          <li><a title="基础-常用命令" href="15162420178152.html">基础-常用命令</a></li>
                        

                    
                      <li class="side-title"><span>raml的使用</span></li>
                        
                          <li><a title="实战--raml命令" href="15151387241047.html">实战--raml命令</a></li>
                        

                    
                      <li class="side-title"><span>负载均衡</span></li>
                        
                          <li><a title="笔记--负载均衡相关技术" href="15119209173837.html">笔记--负载均衡相关技术</a></li>
                        
                          <li><a title="笔记--Kubernetes" href="15118321078018.html">笔记--Kubernetes</a></li>
                        
                          <li><a title="笔记--常用开源软件负载均衡器有：Nginx、LVS、Haproxy。" href="15118307471214.html">笔记--常用开源软件负载均衡器有：Nginx、LVS、Haproxy。</a></li>
                        

                    
                      <li class="side-title"><span>other</span></li>
                        
                          <li><a title="2018" href="15192205651213.html">2018</a></li>
                        
                          <li><a title="金融云总结" href="15181672512390.html">金融云总结</a></li>
                        
                          <li><a title="计算机基础-单位划算" href="15180666486345.html">计算机基础-单位划算</a></li>
                        
                          <li><a title="计算机基础-寻址空间" href="15180666364633.html">计算机基础-寻址空间</a></li>
                        
                          <li><a title="进程线程" href="15175609277088.html">进程线程</a></li>
                        
                          <li><a title="linux" href="15173649652108.html">linux</a></li>
                        
                          <li><a title="硬盘的读写原理  内存的工作原理及时序介绍" href="15172817075574.html">硬盘的读写原理  内存的工作原理及时序介绍</a></li>
                        
                          <li><a title="经典问题与解决方案" href="15167863895932.html">经典问题与解决方案</a></li>
                        
                          <li><a title="专业术语" href="15167559156487.html">专业术语</a></li>
                        

                    
                      <li class="side-title"><span>springboot-初探</span></li>
                        
                          <li><a title="实战--请求参数的校验" href="15153099746529.html">实战--请求参数的校验</a></li>
                        
                          <li><a title="实战--参数类的封装（用到的注解）" href="15153060497346.html">实战--参数类的封装（用到的注解）</a></li>
                        
                          <li><a title="实战--代码读取配置文件" href="15152498896435.html">实战--代码读取配置文件</a></li>
                        
                          <li><a title="实战--application.yml配置" href="15152489636520.html">实战--application.yml配置</a></li>
                        
                          <li><a title="实战--aop切面编程" href="15152275531791.html">实战--aop切面编程</a></li>
                        
                          <li><a title="实战--热部署（热加载）" href="15152265532298.html">实战--热部署（热加载）</a></li>
                        
                          <li><a title="实战--整合mybatis （分页）" href="15152264815650.html">实战--整合mybatis （分页）</a></li>
                        
                          <li><a title="实战--日志" href="15152256498572.html">实战--日志</a></li>
                        
                          <li><a title="实战--统一异常处理" href="15152246712798.html">实战--统一异常处理</a></li>
                        
                          <li><a title="实战--返回json" href="15152240940735.html">实战--返回json</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 


	
		<div class="markdown-body">
		<h1>rabbitMq使用（php）</h1>

		<h3 id="toc_0">概念</h3>

<p>RabbitMQ是流行的开源          <strong>消息队列系统</strong></p>

<blockquote>
<p>RabbitMQ是一个消息代理。它的工作就是接收和转发消息。你可以把它想像成一个邮局：你把信件放入邮箱，邮递员就会把信件投递到你的收件人处。在这个比喻中，RabbitMQ就扮演着邮箱、邮局以及邮递员的角色。</p>
</blockquote>

<h3 id="toc_1">文档</h3>

<p><a href="http://rabbitmq.mr-ping.com/installation/Installing_on_Debian_Ubuntu.html">中文文档</a></p>

<p><a href="http://www.rabbitmq.com/getstarted.html">官方文档</a></p>

<p><a href="https://github.com/lengthuo/php-rabbitmq">php代码实例</a></p>

<h3 id="toc_2">本地环境</h3>

<ol>
<li>安装： brew install rabbitmq</li>
<li><p>设置全局路径 （zshrc）中的配置<br/>
rabbitMq<br/>
alias rabbitmq=&quot;/usr/local/Cellar/rabbitmq/3.6.11&quot;<br/>
export PATH=$PATH:/usr/local/Cellar/rabbitmq/3.6.11/sbin</p></li>
<li><p>启动 ： ./rabbitmq-server</p></li>
<li><p>默认链接端口：5672 界面默认端口：15672 <a href="http://127.0.0.1:15672/">http://127.0.0.1:15672/</a> 账号密码 guest/</p></li>
<li><p>Php 使用方法</p>

<ol>
<li>添加扩展   <a href="http://laravelacademy.org/?s=rabbitmq">http://laravelacademy.org/?s=rabbitmq</a></li>
<li>使用类库   <a href="https://packagist.org/packages/php-amqplib/php-amqplib">https://packagist.org/packages/php-amqplib/php-amqplib</a></li>
</ol></li>
</ol>

<h3 id="toc_3">概念</h3>

<ol>
<li>Exchange：消息交换机，exchange接收到消息后，就根据消息的key和已经设置的binding，进行消息路由，将消息投递到一个或多个队列里。</li>
<li>Queue：消息队列载体，每个消息都会被投入到一个或多个队列。</li>
<li>Binding：绑定，它的作用就是把exchange和queue按照路由规则绑定起来。</li>
<li>Routing Key：路由关键字，exchange根据这个关键字进行消息投递。</li>
<li>vhost：虚拟主机，一个broker里可以开设多个vhost，用作不同用户的权限分离。</li>
<li>producer：消息生产者，就是投递消息的程序。</li>
<li>consumer：消息消费者，就是接受消息的程序。</li>
<li>channel：消息通道，在客户端的每个连接里，可建立多个channel，每个channel代表一个会话任务。</li>
</ol>

<h3 id="toc_4">exchange的几种交换方式（可以自己定义，具体参考官方文档）</h3>

<ol>
<li>扇形交换  fanout</li>
<li>直接交换  Direct</li>
<li>主题交换  topic</li>
<li>首部交换机</li>
</ol>

<p>exchange接收到消息后，就根据消息的key和已经设置的binding，进行消息路由，将消息投递到一个或多个队列里。exchange也有几个类型，（下面从网上找了几个图方便我们理解）</p>

<ol>
<li><p>完全根据key进行投递的叫做Direct交换机，例如，绑定时设置了routing key为”abc”，那么客户端提交的消息，只有设置了key为”abc”的才会投递到队列。<img src="media/15126354080979/15126354907375.jpg" alt=""/></p></li>
<li><p>对key进行模式匹配后进行投递的叫做Topic交换机，符号”#”匹配一个或多个词，符号”<em>”匹配正好一个词。例如”abc.#”匹配”abc.def.ghi”，”abc.</em>”只匹配”abc.def”。在路由选择键中可以有任意数量的字，最多255个字节。 *（星号）可以代替一个字。＃（散列）可以代替零个或多个单词。<img src="media/15126354080979/15126355764727.jpg" alt=""/></p></li>
<li><p>还有一种不需要key的，叫做Fanout交换机，它采取广播模式，一个消息进来时，投递到与该交换机绑定的所有队列。<img src="media/15126354080979/15126354360634.jpg" alt=""/></p></li>
<li><p>首部交换机是忽略routing_key的一种路由方式。路由器和交换机路由的规则是通过Headers信息来交换的，这个有点像HTTP的Headers。将一个交换机声明成首部交换机，绑定一个队列的时候，定义一个Hash的数据结构，消息发送的时候，会携带一组hash数据结构的信息，当Hash的内容匹配上的时候，消息就会被写入队列。绑定交换机和队列的时候，Hash结构中要求携带一个键“x-match”，这个键的Value可以是any或者all，这代表消息携带的Hash是需要全部匹配(all)，还是仅匹配一个键(any)就可以了。相比直连交换机，首部交换机的优势是匹配的规则不被限定为字符串(string)。<br/>
　　</p>

<h3 id="toc_5">持久化</h3>

<p>RabbitMQ支持消息的持久化，也就是数据写在磁盘上，为了数据安全考虑，我想大多数用户都会选择持久化。消息队列持久化包括3个部分：<br/>
　　（1）exchange持久化，在声明时指定durable =&gt; 1<br/>
　　（2）queue持久化，在声明时指定durable =&gt; 1<br/>
　　（3）消息持久化，在投递时指定delivery_mode =&gt; 2（1是非持久化）<br/>
<strong>如果exchange和queue都是持久化的，那么它们之间的binding也是持久化的。如果exchange和queue两者之间有一个持久化，一个非持久化，就不允许建立绑定。</strong></p></li>
</ol>

<h3 id="toc_6">参数解析</h3>

<pre><code>1. 公平分发

```
//同时开2个消费者，发布者发布10条消息，第一条处理20秒，其他处理格式2秒，这个时候有一个队列处理1个消息，其他会处理另外9个。默认的发布机制是平均分布
$channel-&gt;basic_qos(null, 1, null);  //公平派遣 ，
$channel-&gt;basic_consume(&#39;task_queue&#39;, &#39;&#39;, false, false, false, false,$callback);
```
</code></pre>

<p>2.确认机制 <img src="media/15161570526591/15161658662278.jpg" alt=""/><br/>
no_ack = true 默认的方式是不需要确认<br/>
<img src="media/15161570526591/15161659514310.jpg" alt=""/><img src="media/15161570526591/15161659753815.jpg" alt=""/></p>

<h3 id="toc_7">界面</h3>

<p>队列</p>

<pre><code>//第三个参数确定时候是持久化的 即使RabbitMQ重新启动，队列也不会丢失（消息保存磁盘中）
$channel-&gt;queue_declare(&#39;jry-hello2&#39;, false, true, false, false);

</code></pre>

<p><img src="media/15161570526591/15161570605365.jpg" alt=""/></p>

<p>参考文档<a href="https://www.bbsmax.com/A/lamd0MWzge/">消息队列——RabbitMQ学习笔记</a></p>

<h3 id="toc_8">分布式事务的解决方案</h3>

<p>关于分布式事务，工程领域主要讨论的是强一致性和最终一致性的解决方案。</p>

<pre><code>####名字解释：
    1. CAP定理    一致性   可用性(发出一个请求后，服务能在有限时间内返回结果)   分区容错性（系统一部分不可用,不会影响其它部分）
    2. Base理论   （可以通过放弃系统在每个时刻的强一致性来换取系统的可扩展性。）
####一致性模型：
    1. 强一致性：数据更新成功后，任意时刻所有副本中的数据都是一致的，一般采用同步的方式实现。
    2. 弱一致性：数据更新成功后，系统不承诺立即可以读到最新写入的值，也不承诺具体多久之后可以读到。
    3. 最终一致性：弱一致性的一种形式，数据更新成功后，系统不承诺立即可以返回最新写入的值，但是保证最终会返回上一次更新操作的值。
####解决方案：
    1.  2PC 3PC
    2.  eBay 事件队列方案
    3.  TCC  补偿模式
    4.  缓存数据最终一致性
</code></pre>

<p><a href="https://programmaticponderings.com/2017/05/08/decoupling-microservices-using-message-based-rpc-ipc-with-spring-rabbitmq-and-ampq/">基于消息的RPC微服务解耦</a><br/>
<a href="https://programmaticponderings.com/2017/05/15/eventual-consistency-decoupling-microservices-with-spring-amqp-and-rabbitmq/">最终一致性解决方案</a></p>


		</div>
	

 
	

  
  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  </body>
</html>
