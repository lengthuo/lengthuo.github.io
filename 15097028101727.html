<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  定义-日志（2） - lengthuo
  
  </title>
 <meta name="description" content="路漫漫其修远兮吾将上下而求索">
 <link href="atom.xml" rel="alternate" title="lengthuo" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">lengthuo</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; lengthuo</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>金融云解决方案</label></li>

          
            <li><a title="架构-架构流程图" href="15102836287298.html">架构-架构流程图</a></li>
          
            <li><a title="架构-问题与解决方案" href="15102820788307.html">架构-问题与解决方案</a></li>
          
            <li><a title="定义-异常处理" href="15099481239896.html">定义-异常处理</a></li>
          
            <li><a title="文档-单元测试" href="15097993606121.html">文档-单元测试</a></li>
          
            <li><a title="定义-开发流程" href="15097069077658.html">定义-开发流程</a></li>
          
            <li><a title="文档-契约测试" href="15097068761270.html">文档-契约测试</a></li>
          
            <li><a title="定义-返回码" href="15097062709914.html">定义-返回码</a></li>
          
            <li><a title="定义-日志 （1）" href="15097048723727.html">定义-日志 （1）</a></li>
          
            <li><a title="定义-代码规范" href="15097030429159.html">定义-代码规范</a></li>
          
            <li><a title="定义-日志（2）" href="15097028101727.html">定义-日志（2）</a></li>
          
            <li><a title="文档-初始化项目流程" href="15097024555685.html">文档-初始化项目流程</a></li>
          
            <li><a title="定义-返回值格式" href="15097018044485.html">定义-返回值格式</a></li>
          
            <li><a title="定义-请求参数处理" href="15097016017686.html">定义-请求参数处理</a></li>
          
            <li><a title="定义-git提交代码规范" href="15097013558689.html">定义-git提交代码规范</a></li>
          
            <li><a title="文档-接口调用流程" href="15097007112817.html">文档-接口调用流程</a></li>
          
            <li><a title="定义-中心返回错误到p2p" href="15096995487331.html">定义-中心返回错误到p2p</a></li>
          
            <li><a title="定义-接口个数（未解决）" href="15096947595600.html">定义-接口个数（未解决）</a></li>
          
            <li><a title="定义-分页" href="15096937437171.html">定义-分页</a></li>
          

      
        <li class="divider"></li>
        <li><label>php</label></li>

          
            <li><a title="练习题" href="15100534066184.html">练习题</a></li>
          
            <li><a title="基础" href="15100478594807.html">基础</a></li>
          
            <li><a title="开发规范" href="15096850612612.html">开发规范</a></li>
          

      
        <li class="divider"></li>
        <li><label>laravel</label></li>

          
            <li><a title="header" href="15102790903215.html">header</a></li>
          
            <li><a title="cookie" href="15102370714513.html">cookie</a></li>
          
            <li><a title="cache" href="15102229366026.html">cache</a></li>
          
            <li><a title="查询作用域" href="15101110402458.html">查询作用域</a></li>
          
            <li><a title="Request" href="15099459172249.html">Request</a></li>
          
            <li><a title="redis" href="15099421951950.html">redis</a></li>
          
            <li><a title="session" href="15099380444293.html">session</a></li>
          

      
        <li class="divider"></li>
        <li><label>redis</label></li>

          
            <li><a title="支持类型" href="15099434695015.html">支持类型</a></li>
          
            <li><a title="认识redis" href="15099433750652.html">认识redis</a></li>
          

      
        <li class="divider"></li>
        <li><label>linux</label></li>

          
            <li><a title="系统定时任务-cron" href="15097607422303.html">系统定时任务-cron</a></li>
          
            <li><a title="服务重启" href="15097602933518.html">服务重启</a></li>
          
            <li><a title="系统定时任务-at" href="15097593737810.html">系统定时任务-at</a></li>
          
            <li><a title="linux 查看服务器系统的信息" href="15097189513675.html">linux 查看服务器系统的信息</a></li>
          
            <li><a title="常用命令" href="15097187372089.html">常用命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>git</label></li>

          
            <li><a title="提交代码规范" href="15097964202481.html">提交代码规范</a></li>
          
            <li><a title="git命令大全" href="15097175223406.html">git命令大全</a></li>
          
            <li><a title="git 常用命令" href="15097169426182.html">git 常用命令</a></li>
          

      
        <li class="divider"></li>
        <li><label>算法</label></li>

          
            <li><a title="排序-说明" href="15098667005910.html">排序-说明</a></li>
          
            <li><a title="排序-归并排序" href="15098651418800.html">排序-归并排序</a></li>
          
            <li><a title="排序-插入排序-希尔排序（面试热点）" href="15097185400207.html">排序-插入排序-希尔排序（面试热点）</a></li>
          
            <li><a title="排序-选择排序" href="15097183591874.html">排序-选择排序</a></li>
          
            <li><a title="排序-插入排序-直接插入排序（面试热点）" href="15097183328300.html">排序-插入排序-直接插入排序（面试热点）</a></li>
          
            <li><a title="排序-快速排序（面试热点）" href="15097181541647.html">排序-快速排序（面试热点）</a></li>
          
            <li><a title="排序-冒泡(基础)" href="15097179853305.html">排序-冒泡(基础)</a></li>
          

      
        <li class="divider"></li>
        <li><label>数据结构</label></li>

          
            <li><a title="树-红黑树（Red Black Tree）" href="15102209229230.html">树-红黑树（Red Black Tree）</a></li>
          
            <li><a title="树-二叉查找树（BST）" href="15102205459934.html">树-二叉查找树（BST）</a></li>
          
            <li><a title="hash" href="15098725685121.html">hash</a></li>
          
            <li><a title="树" href="15098688823158.html">树</a></li>
          

      
        <li class="divider"></li>
        <li><label>常用js代码</label></li>

          
            <li><a title="参数验证" href="15101054949430.html">参数验证</a></li>
          
            <li><a title="form表单提交方式，submit和button的用法" href="15100286139267.html">form表单提交方式，submit和button的用法</a></li>
          
            <li><a title="table具体某一列值+bootstrap弹框" href="15100254209802.html">table具体某一列值+bootstrap弹框</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>金融云解决方案</span></li>
                        
                          <li><a title="架构-架构流程图" href="15102836287298.html">架构-架构流程图</a></li>
                        
                          <li><a title="架构-问题与解决方案" href="15102820788307.html">架构-问题与解决方案</a></li>
                        
                          <li><a title="定义-异常处理" href="15099481239896.html">定义-异常处理</a></li>
                        
                          <li><a title="文档-单元测试" href="15097993606121.html">文档-单元测试</a></li>
                        
                          <li><a title="定义-开发流程" href="15097069077658.html">定义-开发流程</a></li>
                        
                          <li><a title="文档-契约测试" href="15097068761270.html">文档-契约测试</a></li>
                        
                          <li><a title="定义-返回码" href="15097062709914.html">定义-返回码</a></li>
                        
                          <li><a title="定义-日志 （1）" href="15097048723727.html">定义-日志 （1）</a></li>
                        
                          <li><a title="定义-代码规范" href="15097030429159.html">定义-代码规范</a></li>
                        
                          <li><a title="定义-日志（2）" href="15097028101727.html">定义-日志（2）</a></li>
                        
                          <li><a title="文档-初始化项目流程" href="15097024555685.html">文档-初始化项目流程</a></li>
                        
                          <li><a title="定义-返回值格式" href="15097018044485.html">定义-返回值格式</a></li>
                        
                          <li><a title="定义-请求参数处理" href="15097016017686.html">定义-请求参数处理</a></li>
                        
                          <li><a title="定义-git提交代码规范" href="15097013558689.html">定义-git提交代码规范</a></li>
                        
                          <li><a title="文档-接口调用流程" href="15097007112817.html">文档-接口调用流程</a></li>
                        
                          <li><a title="定义-中心返回错误到p2p" href="15096995487331.html">定义-中心返回错误到p2p</a></li>
                        
                          <li><a title="定义-接口个数（未解决）" href="15096947595600.html">定义-接口个数（未解决）</a></li>
                        
                          <li><a title="定义-分页" href="15096937437171.html">定义-分页</a></li>
                        

                    
                      <li class="side-title"><span>php</span></li>
                        
                          <li><a title="练习题" href="15100534066184.html">练习题</a></li>
                        
                          <li><a title="基础" href="15100478594807.html">基础</a></li>
                        
                          <li><a title="开发规范" href="15096850612612.html">开发规范</a></li>
                        

                    
                      <li class="side-title"><span>laravel</span></li>
                        
                          <li><a title="header" href="15102790903215.html">header</a></li>
                        
                          <li><a title="cookie" href="15102370714513.html">cookie</a></li>
                        
                          <li><a title="cache" href="15102229366026.html">cache</a></li>
                        
                          <li><a title="查询作用域" href="15101110402458.html">查询作用域</a></li>
                        
                          <li><a title="Request" href="15099459172249.html">Request</a></li>
                        
                          <li><a title="redis" href="15099421951950.html">redis</a></li>
                        
                          <li><a title="session" href="15099380444293.html">session</a></li>
                        

                    
                      <li class="side-title"><span>redis</span></li>
                        
                          <li><a title="支持类型" href="15099434695015.html">支持类型</a></li>
                        
                          <li><a title="认识redis" href="15099433750652.html">认识redis</a></li>
                        

                    
                      <li class="side-title"><span>linux</span></li>
                        
                          <li><a title="系统定时任务-cron" href="15097607422303.html">系统定时任务-cron</a></li>
                        
                          <li><a title="服务重启" href="15097602933518.html">服务重启</a></li>
                        
                          <li><a title="系统定时任务-at" href="15097593737810.html">系统定时任务-at</a></li>
                        
                          <li><a title="linux 查看服务器系统的信息" href="15097189513675.html">linux 查看服务器系统的信息</a></li>
                        
                          <li><a title="常用命令" href="15097187372089.html">常用命令</a></li>
                        

                    
                      <li class="side-title"><span>git</span></li>
                        
                          <li><a title="提交代码规范" href="15097964202481.html">提交代码规范</a></li>
                        
                          <li><a title="git命令大全" href="15097175223406.html">git命令大全</a></li>
                        
                          <li><a title="git 常用命令" href="15097169426182.html">git 常用命令</a></li>
                        

                    
                      <li class="side-title"><span>算法</span></li>
                        
                          <li><a title="排序-说明" href="15098667005910.html">排序-说明</a></li>
                        
                          <li><a title="排序-归并排序" href="15098651418800.html">排序-归并排序</a></li>
                        
                          <li><a title="排序-插入排序-希尔排序（面试热点）" href="15097185400207.html">排序-插入排序-希尔排序（面试热点）</a></li>
                        
                          <li><a title="排序-选择排序" href="15097183591874.html">排序-选择排序</a></li>
                        
                          <li><a title="排序-插入排序-直接插入排序（面试热点）" href="15097183328300.html">排序-插入排序-直接插入排序（面试热点）</a></li>
                        
                          <li><a title="排序-快速排序（面试热点）" href="15097181541647.html">排序-快速排序（面试热点）</a></li>
                        
                          <li><a title="排序-冒泡(基础)" href="15097179853305.html">排序-冒泡(基础)</a></li>
                        

                    
                      <li class="side-title"><span>数据结构</span></li>
                        
                          <li><a title="树-红黑树（Red Black Tree）" href="15102209229230.html">树-红黑树（Red Black Tree）</a></li>
                        
                          <li><a title="树-二叉查找树（BST）" href="15102205459934.html">树-二叉查找树（BST）</a></li>
                        
                          <li><a title="hash" href="15098725685121.html">hash</a></li>
                        
                          <li><a title="树" href="15098688823158.html">树</a></li>
                        

                    
                      <li class="side-title"><span>常用js代码</span></li>
                        
                          <li><a title="参数验证" href="15101054949430.html">参数验证</a></li>
                        
                          <li><a title="form表单提交方式，submit和button的用法" href="15100286139267.html">form表单提交方式，submit和button的用法</a></li>
                        
                          <li><a title="table具体某一列值+bootstrap弹框" href="15100254209802.html">table具体某一列值+bootstrap弹框</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>定义-日志（2）</h1>

<ol>
<li>请求进入 请求返回 都添加日志 （日志跟踪更详细）</li>
<li>日志需要接入elk（日志分析）</li>
</ol>

<h3 id="toc_0">生成日志唯一标示</h3>

<pre><code>namespace App\Tools\LogWrite;

class GenerateId
{

    /**
     * @return string 生成唯一id
     */
    public static function getGuid()
    {
        mt_srand((double)microtime() * 10000);//optional for php 4.2.0 and up.
        $charid = strtoupper(md5(uniqid(rand(), true)));
        $hyphen = chr(45);// &quot;-&quot;
        $uuid = substr($charid, 0, 8) . $hyphen
            . substr($charid, 8, 4) . $hyphen
            . substr($charid, 12, 4) . $hyphen
            . substr($charid, 16, 4) . $hyphen
            . substr($charid, 20, 12);
        return $uuid;
    }
}

</code></pre>

<h3 id="toc_1">日志方法修改</h3>

<pre><code>&lt;?php

namespace App\Tools\LogWrite;

/**
 * 记录请求日志,为中间件定制(专门在中间件使用  记录东西过多，后期可以去除不表要的参数)
 * Class LogBeforeAndAfter
 * @package App\Tools\LogWrite
 */
class LogBeforeAndAfter
{

    public function logBefore($request)
    {
        $logData = $this-&gt;parseHeaders($request);
        $logData[&#39;type&#39;] = &#39;request&#39;;
        $logData[&#39;data&#39;] = $request-&gt;all();
        LogWrite::info($logData);
    }

    public function logAfter($request, $response)
    {
        $logData = $this-&gt;parseHeaders($request);
        $logData[&#39;type&#39;] = &#39;response&#39;;
        $logData[&#39;data&#39;] = json_decode($response-&gt;getContent(), true);
        LogWrite::info($logData);
    }

    private function parseHeaders($request)
    {
        $headers = $request-&gt;header();
        $logData = [];
        $logData[&#39;host&#39;] = array_get($headers, &#39;host&#39;, [&#39;&#39;])[0];
        $logData[&#39;user-agent&#39;] = array_get($headers, &#39;user-agent&#39;, [&#39;&#39;])[0];
        $logData[&#39;accept&#39;] = array_get($headers, &#39;accept&#39;, [&#39;&#39;])[0];
        $logData[&#39;content-type&#39;] = array_get($headers, &#39;content-type&#39;, [&#39;&#39;])[0];
        return $logData;
    }


}

</code></pre>

<h3 id="toc_2">日志类</h3>

<pre><code>

&lt;?php

namespace App\Tools\LogWrite;

use Illuminate\Log\Writer;
use Illuminate\Support\Facades\Input;
use Illuminate\Support\Facades\Log;
//use Illuminate\Support\Facades\Session;
use Illuminate\Support\Facades\Request;
use Monolog\Logger;

/**
 * 日志记录类
 * Class LogWrite
 * @package App\Tools\LogWrite
 */
class LogWrite
{

    private $loggers = array();
    private static $log;
    private $guid;
//    private $sessionId;
    private $uid;

    private function __construct()
    {
        $this-&gt;guid = GenerateId::getGuid();
//        $this-&gt;sessionId = Session::getId();
//        $loginInfo = getLoginInfoWithoutAuto(&#39;loginInfo&#39;);
//        $this-&gt;uid = isset($loginInfo[&#39;uid&#39;]) &amp;&amp; !empty($loginInfo[&#39;uid&#39;]) ? $loginInfo[&#39;uid&#39;] : 0;
    }

    private function getLogger($type, $day = 30)
    {
        if (empty($this-&gt;loggers[$type])) {
            $this-&gt;loggers[$type] = new Writer(new Logger($type));
            $logPath = env(&#39;LOG_PATH&#39;, storage_path() . &#39;/logs&#39;) . &#39;/&#39;;
            $this-&gt;loggers[$type]-&gt;useDailyFiles($logPath . env(&#39;APP_NAME&#39;, &#39;center&#39;) . &#39;.&#39; . $type . &#39;.log&#39;, $day);
        }
        return $this-&gt;loggers[$type];
    }

    private function doLog($name, $level, $data)
    {
        $data[&#39;guid&#39;] = $this-&gt;guid;
//        $data[&#39;sessionId&#39;] = $this-&gt;sessionId;
//        $data[&#39;uid&#39;] = $this-&gt;uid;
        $loger = $this-&gt;getLogger($name);
        $loger-&gt;$level(json_encode($data, JSON_UNESCAPED_UNICODE));
    }


    public static function log()
    {
        if (self::$log) {
            return self::$log;
        }
        self::$log = new self();
        return self::$log;
    }

    public static function info(array $data, $name = __FUNCTION__, $level = __FUNCTION__)
    {
        self::log()-&gt;doLog($name, $level, $data);
    }

    public static function error(array $data, $name = __FUNCTION__, $level = __FUNCTION__)
    {

        self::log()-&gt;doLog($name, $level, $data);

    }

    public static function exception(\Exception $exception, $request = null)
    {
        $errLog = [
            &#39;type&#39; =&gt; &#39;error&#39;,
            &#39;remoteAddr&#39; =&gt; &#39;&#39;,
            &#39;remotePort&#39; =&gt; &#39;&#39;,
            &#39;referer&#39; =&gt; &#39;&#39;,
            &#39;url&#39; =&gt; &#39;&#39;,
            &#39;input&#39; =&gt; [],
            &#39;message&#39; =&gt; &#39;&#39;,
            &#39;file&#39; =&gt; &#39;&#39;,
            &#39;line&#39; =&gt; &#39;&#39;,
            &#39;code&#39; =&gt; &#39;&#39;,
            &#39;trace&#39; =&gt; [],
            &#39;exceptionClass&#39; =&gt; &#39;&#39;,
        ];
        $errLog[&#39;remoteAddr&#39;] = isset($_SERVER[&#39;REMOTE_ADDR&#39;]) &amp;&amp; !empty($_SERVER[&#39;REMOTE_ADDR&#39;]) ? $_SERVER[&#39;REMOTE_ADDR&#39;] : &#39;&#39;;
        $errLog[&#39;remotePort&#39;] = isset($_SERVER[&#39;REMOTE_PORT&#39;]) &amp;&amp; !empty($_SERVER[&#39;REMOTE_PORT&#39;]) ? $_SERVER[&#39;REMOTE_PORT&#39;] : &#39;&#39;;
        $errLog[&#39;referer&#39;] = isset($_SERVER[&#39;HTTP_REFERER&#39;]) &amp;&amp; !empty($_SERVER[&#39;HTTP_REFERER&#39;]) ? $_SERVER[&#39;HTTP_REFERER&#39;] : &#39;&#39;;
        $errLog[&#39;url&#39;] = Request::url() ?: &#39;&#39;;
        $errLog[&#39;input&#39;] = Input::all() ?: [];
        $errLog[&#39;message&#39;] = $exception-&gt;getMessage();
        $errLog[&#39;file&#39;] = $exception-&gt;getFile();
        $errLog[&#39;line&#39;] = $exception-&gt;getLine();
        $errLog[&#39;code&#39;] = $exception-&gt;getCode();
//            $errLog[&#39;trace&#39;] = $exception-&gt;getTrace();
        $errLog[&#39;exceptionClass&#39;] = get_class($exception);
        self::error($errLog);
    }


}

</code></pre>

<h3 id="toc_3">前置中间件</h3>

<pre><code>&lt;?php

namespace App\Http\Middleware;

use App\Tools\LogWrite\LogBeforeAndAfter;
use App\Tools\LogWrite\LogWrite;
use Closure;

class LogBefore
{
    /**
     * @desc 将请求信息写入日志
     * @param $request
     * @param Closure $next
     */
    public function handle($request, Closure $next)
    {
        try {
            (new LogBeforeAndAfter())-&gt;logBefore($request);
        } catch (\Exception $e) {
            $logData = [&#39;type&#39; =&gt; &#39;error&#39;];
            LogWrite::error($logData);
        }
        return $next($request);
    }
}


</code></pre>

<h3 id="toc_4">后置中间件</h3>

<pre><code>
&lt;?php

namespace App\Http\Middleware;

use App\Tools\LogWrite\LogBeforeAndAfter;
use App\Tools\LogWrite\LogWrite;
use Closure;

class LogAfter
{
    /**
     * @desc 将请求信息写入日志
     * @param $request
     * @param Closure $next
     */
    public function handle($request, Closure $next)
    {
        $response = $next($request);
        try {
            (new LogBeforeAndAfter())-&gt;logAfter($request, $response);
        } catch (\Exception $e) {
            $logData = [&#39;type&#39; =&gt; &#39;error&#39;];
            LogWrite::error($logData);
        }
        return $response;
    }
}


</code></pre>

<h3 id="toc_5">修改kernel</h3>

<pre><code>
 /**
    * The application&#39;s global HTTP middleware stack.
    *
    * These middleware are run during every request to your application.
    */
protected $middleware = [
        //追加2项
        \App\Http\Middleware\LogBefore::class,  
        \App\Http\Middleware\LogAfter::class,   
    ];

</code></pre>

<h3 id="toc_6">调用实例</h3>

<pre><code>
 LogWrite::info([&quot;test&quot;=&gt;&quot;测试请求&quot;]);
 LogWrite::error([&quot;test&quot;=&gt;&quot;error&quot;]);
 LogWrite::exception(new \Exception(),[&quot;test&quot;=&gt;&quot;exception&quot;]);
 

</code></pre>

<h3 id="toc_7">日志信息</h3>

<pre><code>生成2个文件
xxx 为中心的名称（为了elk接入之后方便区分是哪个中心的日志）
xxx.info

[2017-11-03 10:46:00] info.INFO: {&quot;host&quot;:&quot;localhost&quot;,&quot;user-agent&quot;:&quot;Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/61.0.3163.100 Safari\/537.36&quot;,&quot;accept&quot;:&quot;text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8&quot;,&quot;content-type&quot;:&quot;&quot;,&quot;type&quot;:&quot;request&quot;,&quot;data&quot;:[],&quot;guid&quot;:&quot;B80EA6D2-F75D-AA87-0DDC-BCB9B83B6C21&quot;}  
[2017-11-03 10:46:00] info.INFO: {&quot;test&quot;:&quot;测试请求&quot;,&quot;guid&quot;:&quot;B80EA6D2-F75D-AA87-0DDC-BCB9B83B6C21&quot;}  
[2017-11-03 10:46:00] info.INFO: {&quot;host&quot;:&quot;localhost&quot;,&quot;user-agent&quot;:&quot;Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/61.0.3163.100 Safari\/537.36&quot;,&quot;accept&quot;:&quot;text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8&quot;,&quot;content-type&quot;:&quot;&quot;,&quot;type&quot;:&quot;response&quot;,&quot;data&quot;:{&quot;hello&quot;:&quot;word&quot;},&quot;guid&quot;:&quot;B80EA6D2-F75D-AA87-0DDC-BCB9B83B6C21&quot;}  


xxx.error  

exception 只是组装自己的参数，最后还是调用error方法 ，所以日志有2条

[2017-11-03 10:46:00] error.ERROR: {&quot;test&quot;:&quot;error&quot;,&quot;guid&quot;:&quot;B80EA6D2-F75D-AA87-0DDC-BCB9B83B6C21&quot;}  
[2017-11-03 10:46:00] error.ERROR: {&quot;type&quot;:&quot;error&quot;,&quot;remoteAddr&quot;:&quot;::1&quot;,&quot;remotePort&quot;:&quot;62126&quot;,&quot;referer&quot;:&quot;&quot;,&quot;url&quot;:&quot;http:\/\/localhost\/eking_platformwallet_center\/public\/test&quot;,&quot;input&quot;:[],&quot;message&quot;:&quot;&quot;,&quot;file&quot;:&quot;\/Users\/shuo\/w3c\/eking_platformwallet_center\/app\/Http\/Controllers\/TestController.php&quot;,&quot;line&quot;:14,&quot;code&quot;:0,&quot;trace&quot;:[],&quot;exceptionClass&quot;:&quot;Exception&quot;,&quot;guid&quot;:&quot;B80EA6D2-F75D-AA87-0DDC-BCB9B83B6C21&quot;}  



</code></pre>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15097048723727.html"  title="Previous Post: 定义-日志 （1）">&laquo; 定义-日志 （1）</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15097018044485.html" 
	        title="Next Post: 定义-返回值格式">定义-返回值格式 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15097028101727.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  </body>
</html>
